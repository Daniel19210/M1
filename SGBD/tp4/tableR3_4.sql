/*
-- Cr√©ation dess tables R3 et R4
DROP TABLE R3;
DROP TABLE R4;

CREATE TABLE R3(
    i INTEGER,
    PRIMARY KEY(i)
);
CREATE TABLE R4(
    i INTEGER,
    j INTEGER,
    PRIMARY KEY (i),
    FOREIGN KEY ( j ) REFERENCES R3(i)
);

INSERT INTO R3 VALUES (3);
INSERT INTO R3 VALUES (2);
INSERT INTO R3 VALUES (4);
INSERT INTO R3 VALUES (1);

INSERT INTO R4 VALUES (1, 3);
INSERT INTO R4 VALUES (2, 3);
INSERT INTO R4 VALUES (3, 4);
INSERT INTO R4 VALUES (4, 1);

SELECT ROWID FROM R3;
SELECT ROWID FROM R4;
*/

/*
DROP TABLE R3_a;
DROP TABLE R4_a;
--CREATE CLUSTER ch(i INTEGER) HASHKEYS 123;

CREATE TABLE R3_a(
    i INTEGER,
    PRIMARY KEY(i)
)
CLUSTER ch(i);
CREATE TABLE R4_a(
    i INTEGER,
    j INTEGER,
    PRIMARY KEY (i),
    FOREIGN KEY ( j ) REFERENCES R3_a(i)
)
CLUSTER ch(j);

INSERT INTO R3_a VALUES (3);
INSERT INTO R3_a VALUES (2);
INSERT INTO R3_a VALUES (4);
INSERT INTO R3_a VALUES (1);

INSERT INTO R4_a VALUES (1, 3);
INSERT INTO R4_a VALUES (2, 3);
INSERT INTO R4_a VALUES (3, 4);
INSERT INTO R4_a VALUES (4, 1);

SELECT ROWID FROM R3_a;
SELECT ROWID FROM R4_a;
*/
DROP TABLE R3_b;
DROP TABLE R4_b;

CREATE CLUSTER ch_indexe(i INTEGER);

CREATE TABLE R3_b(
    i INTEGER,
    PRIMARY KEY(i)
)
CLUSTER ch_indexe(i);
CREATE TABLE R4_b(
    i INTEGER,
    j INTEGER,
    PRIMARY KEY (i),
    FOREIGN KEY ( j ) REFERENCES R3_b(i)
)
CLUSTER ch_indexe(j);

CREATE INDEX index_ch_R3_b ON CLUSTER ch_indexe;

INSERT INTO R3_b VALUES (3);
INSERT INTO R3_b VALUES (2);
INSERT INTO R3_b VALUES (4);
INSERT INTO R3_b VALUES (1);

INSERT INTO R4_b VALUES (1, 3);
INSERT INTO R4_b VALUES (2, 3);
INSERT INTO R4_b VALUES (3, 4);
INSERT INTO R4_b VALUES (4, 1);

SELECT ROWID FROM R3_b;
SELECT ROWID FROM R4_b;